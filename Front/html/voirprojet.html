<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width , initial-scale=1.0">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../styles/BARS.css">
    <link rel="stylesheet" href="../styles/ajout.css">

    <script src="../javascript/BARS.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap">
    <title>Lmcs Quest</title>
</head>

<body>
    

    <button class="left-button" onclick="goBack()"><img src="../images/Left1.png"></button>

    <div class="pubb">
        <div class="pub-title">
            <p>Projet</p>
        </div>
        <div class="pub-content">
            <div class="pub-container" id="originalInfo">
                <div class="left-pub-info">
                    <p>Titre :</p>
                    <p>Chef de projet :</p>
                    <p>Date de debut de projet :</p>
                    <p>Date de fin de projet :</p>
                    <p>Domaine :</p>
                    <p>Liste des membres :</p>

                </div>
                <div class="right-pub-info">
                    <p id="Titre">l’intellegence artificielle</p>
                    <p id="Chef-projet">Medabis Amina </p>
                    <p id="debut">2019</p>
                    <p id="fin">2021</p>
                    <p id="Domainee">informatique</p>
                    <p id="liste-mem">______</p>

                </div>
            </div>
        </div>

    </div>
 
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Récupérer l'ID du projet de la session
    const projetId = sessionStorage.getItem('id_projet');

    // Faire une requête AJAX pour récupérer les détails du projet
    fetch(`http://127.0.0.1:8000/api/projets/${projetId}/`)
        .then(response => response.json())
        .then(data => {
            // Mettre à jour les éléments HTML avec les données récupérées
            document.getElementById('Titre').textContent = data.titre_projet.substring(0, 40) || 'xxxxxx';
document.getElementById('Chef-projet').textContent = data.chef_de_projet || 'xxxxxx';
document.getElementById('debut').textContent = data.annee_debut || 'xxxxxx';
document.getElementById('fin').textContent = data.annee_fin || 'xxxxxx';
document.getElementById('Domainee').textContent = data.domaine || 'xxxxxx';


            // Vérifier si des chercheurs sont disponibles
            if (data.chercheurs.length > 0) {
                // Mettre à jour les données pour le premier chercheur
                document.getElementById('liste-mem').textContent = `${data.chercheurs[0].nom_chercheur} ${data.chercheurs[0].prenom_chercheur}`;

                // Vérifier s'il y a plus de chercheurs
                if (data.chercheurs.length > 1) {
                    // Boucler à travers les autres chercheurs et les ajouter à la liste
                    for (let i = 1; i < data.chercheurs.length; i++) {
                        const chercheur = document.createElement('p');
                        chercheur.textContent = `${data.chercheurs[i].nom_chercheur} ${data.chercheurs[i].prenom_chercheur}`;
                        document.getElementById('liste-mem').appendChild(chercheur);
                    }
                }
            }
        })
        .catch(error => console.error('Une erreur s\'est produite : ', error));
});
</script>
</body>

</html>

    
    <script src=" https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../javascript/ajout.js"></script>
    <script src="../javascript/BARSS.js"></script>
    <script src="../javascript/notification.js"></script>

</body>

</html>